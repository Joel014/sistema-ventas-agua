<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Ventas - Agua Purificada</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#667eea">
  <script src="script.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>

</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <header class="header">
      <h1>ğŸ’§ Sistema de Ventas</h1>
      <p>Agua Purificada - GestiÃ³n Digital</p>
    </header>

    <main class="main-content">
      <!-- SECCIÃ“N: NUEVA VENTA -->
      <section class="form-section">
        <h2>ğŸ“ Nueva Venta</h2>
        
        <!-- Ventas Local y CamiÃ³n -->
        <div class="form-row">
          <div class="form-group">
            <label for="ventaLocal">ğŸª Venta Local (25 pesos)</label>
            <div class="input-with-btn">
              <input type="number" id="ventaLocal" min="0" step="1" placeholder="0">
              <button type="button" class="save-inline-btn" onclick="guardarIndividual('ventaLocal')" title="Guardar venta local">ğŸ’¾</button>
            </div>
          </div>

          <div class="form-group">
            <label for="camion">ğŸšš CamiÃ³n (30 pesos)</label>
            <div class="input-with-btn">
              <input type="number" id="camion" min="0" step="1" placeholder="0">
              <button type="button" class="save-inline-btn" onclick="guardarIndividual('camion')" title="Guardar venta camiÃ³n">ğŸ’¾</button>
            </div>
          </div>

          <div class="form-group">
            <label>Total Botellones</label>
            <div class="price-display" id="totalBotellones">0</div>
          </div>
        </div>

        <!-- SubsecciÃ³n: Repartidores -->
        <div class="delivery-section">
          <h3>ğŸš´ Repartidores (35 pesos)</h3>

          <div class="delivery-input-container">
            <label for="empleadoNombre" class="visually-hidden">Nombre del repartidor</label>
            <input type="text" id="empleadoNombre" placeholder="Nombre del repartidor (ej. Juan PÃ©rez)" maxlength="30">
            <button type="button" class="add-employee-btn" onclick="agregarEmpleado()">+ Agregar repartidor</button>
          </div>

          <div class="employees-container" id="empleadosContainer">
            <div style="color:#999; font-style:italic; grid-column:1 / -1">No hay repartidores agregados</div>
          </div>
        </div>

        <!-- Resumen de Venta -->
        <div class="form-row">
          <div class="form-group">
            <label>Precio por Servicio</label>
            <div class="price-display" id="precioServicio">$0</div>
          </div>
          
          <div class="form-group">
            <label>Tipo de Servicio</label>
            <div class="price-display" id="tipoServicio">-</div>
          </div>
          
          <div class="form-group">
            <label>Total a Pagar</label>
            <div class="price-display" id="totalPagar">$0</div>
          </div>
        </div>
      </section>

      <!-- SECCIÃ“N: TOTAL DE VENTA -->
      <section class="total-section">
        <div>Total de la Venta</div>
        <div class="total-amount" id="montoFinal">$0</div>
      </section>

      <!-- SECCIÃ“N: BOTONES PRINCIPALES -->
      <section class="buttons">
        <button type="button" class="btn-save" onclick="guardarVenta()">ğŸ’¾ Guardar Venta</button>
        <button type="button" class="btn-clear" onclick="limpiarFormulario()">ğŸ”„ Limpiar</button>
        <button type="button" class="btn-export" onclick="exportarCSV()">ğŸ“ Exportar CSV</button>
      </section>

      <!-- SECCIÃ“N: GASTOS -->
      <section class="expenses-section">
        <h3>ğŸ’¸ Registro de Gastos</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="montoGasto">ğŸ’° Monto del Gasto</label>
            <input type="number" id="montoGasto" min="0" placeholder="0" step="0.01">
          </div>
          
          <div class="form-group" style="grid-column: span 2;">
            <label for="notaGasto">ğŸ“ DescripciÃ³n del Gasto</label>
            <textarea id="notaGasto" placeholder="Ej: Compra de repuestos, gasolina, mantenimiento..." rows="3"></textarea>
          </div>
        </div>
        
        <button class="btn-warning" onclick="guardarGasto()">ğŸ’¾ Guardar Gasto</button>
      </section>

      <!-- SECCIÃ“N: OTROS SERVICIOS -->
      <section class="otros-section">
        <h3>ğŸ”§ Otros Servicios</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="precioOtro">ğŸ’µ Precio Unitario</label>
            <input type="number" id="precioOtro" min="1" step="0.01" placeholder="Ej: 25">
          </div>
          
          <div class="form-group">
            <label for="cantidadOtro">ğŸ“¦ Cantidad</label>
            <input type="number" id="cantidadOtro" min="1" placeholder="0">
          </div>
          
          <div class="form-group">
            <label for="descripcionOtro">ğŸ“ DescripciÃ³n</label>
            <input type="text" id="descripcionOtro" placeholder="Ej: Servicio especial, limpieza..." maxlength="50">
          </div>
        </div>
        
        <button class="btn-info" onclick="guardarOtroServicio()">ğŸ’¾ Guardar Otro Servicio</button>
      </section>

      <!-- SECCIÃ“N: REGISTRO DE VENTAS -->
      <section class="records-section">
        <div class="records-header">
          <h2>ğŸ“Š Registro de Ventas del DÃ­a</h2>
          <button type="button" class="btn-clear" onclick="limpiarRegistros()" style="padding:8px 16px; font-size:.9em">
            ğŸ—‘ï¸ Limpiar Todo
          </button>
        </div>

        <table class="records-table">
          <thead>
            <tr>
              <th>Hora</th>
              <th>Tipo</th>
              <th>Detalles</th>
              <th>Cantidad</th>
              <th>Precio Unit.</th>
              <th>Total</th>
              <th>AcciÃ³n</th>
            </tr>
          </thead>
          <tbody id="tablaRegistros">
            <tr>
              <td colspan="7" style="color:#888; font-style:italic; text-align:center">
                No hay ventas registradas
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Resumen Diario -->
        <div class="daily-total">
          <h3>ğŸ’° Total del DÃ­a: <span id="totalDiario">$0</span></h3>
          <p>
            Local: <span id="ventasLocal">0</span> | 
            Delivery: <span id="ventasDelivery">0</span> | 
            CamiÃ³n: <span id="ventasCamion">0</span> | 
            Total Botellones: <span id="botellonesTotal">0</span>
          </p>
        </div>
      </section>
    </main>
    <script src="app.js"></script>
  </div>
</body>
</html>
